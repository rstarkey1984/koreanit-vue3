# Node.js 실행 스크립트 구성 (package.json)

이 단계에서는 `node app/app.js` 실행 방식을
`npm run dev` / `npm start`로 관리하고,
환경변수까지 함께 설정한다.

---

## 1. 목적

* 서버 실행 명령어를 표준화한다
* 개발용 / 운영용 실행 방식을 분리한다
* 환경변수(`process.env`)를 코드 밖에서 관리한다

---

## 2. 기본 구조

```json
{
  "scripts": {
    "dev": "nodemon -r dotenv/config app/index.js",
    "start": "node -r dotenv/config app/index.js"
  }
}
```

* `npm run dev`  : 개발용 (자동 재시작)
* `npm start`   : 운영용 (단순 실행)

`-r dotenv/config` 옵션을 주면
 ```
 require("dotenv/config");
 ```
 이 코드가 Node 시작과 동시에 가장 먼저 실행된다.

 이때 일어나는 일:
 ```
 .env 파일 읽기
→ process.env.PORT
→ process.env.NODE_ENV
→ 기타 환경변수 등록
```


---

## 3. 필요한 패키지

```bash
npm i dotenv
npm i -D nodemon
```

* dotenv  : `.env` 파일의 환경변수를 `process.env`로 주입
* nodemon : 파일 변경 시 서버 자동 재시작 (개발 전용)

---

## 4. 환경변수 파일 (.env)

프로젝트 루트에 `.env` 파일을 생성한다.

```env
PORT=3000
NODE_ENV=development
```

이 값들은 실행 시 자동으로 로드된다.

---

## 5. app/index.js에서 사용

```js
const PORT = process.env.PORT || 3000;
```

* 실행 환경에 따라 값이 바뀐다
* 코드 수정 없이 설정 변경 가능

---

## 6. 실행 방법

```bash
npm run dev
```

또는

```bash
npm start
```

---

## 핵심 요약

* 실행 방식은 `package.json`의 scripts에서 관리한다
* 환경변수는 코드가 아닌 설정 파일에서 관리한다
* 지금 단계는 **실행 환경 구성** 단계이다

> 코드를 작성하기 전에
> "어떻게 실행할지"를 먼저 정한다
